const formTask = document.getElementById("formTask"), addBtn = document.getElementById("addBtn"), taskInput = document.getElementById("taskInput"), taskList = document.getElementById("taskList"), container = document.querySelector(".container"); let tarefas = JSON.parse(localStorage.getItem("tarefas")) || []; const gerarId = () => "_" + Math.random().toString(36).substring(2, 9); function renderTarefas() { taskList.innerHTML = "", tarefas.forEach((e, a) => { let t = document.createElement("div"), r = document.createElement("img"); r.src = e.feita ? "./src/images/circle-check.svg" : "./src/images/circle.svg", r.alt = e.feita ? "Circulo amarelo" : "Circulo", r.width = "24", r.height = "24", r.loading = "lazy"; let s = document.createElement("span"); s.textContent = e.texto, t.appendChild(r), t.appendChild(s), t.addEventListener("click", () => { tarefas[a].feita = !tarefas[a].feita, salvarTarefas(), renderTarefas() }); let i = document.createElement("button"), n = document.createElement("img"); n.src = e.feita ? "./src/images/trash-yellow.svg" : "./src/images/trash.svg", n.alt = e.feita ? "Lixeira amarela" : "Lixeira", i.alt = "Remover tarefa", n.loading = "lazy", i.appendChild(n), i.addEventListener("click", a => { a.stopPropagation(), tarefas = tarefas.filter(a => a.id !== e.id), salvarTarefas(), renderTarefas() }), e.feita && t.classList.add("done"), t.appendChild(i), taskList.appendChild(t) }) } function salvarTarefas() { localStorage.setItem("tarefas", JSON.stringify(tarefas)) } formTask.addEventListener("submit", e => { e.preventDefault(); let a = taskInput.value.trim(); "" !== a && (tarefas.push({ id: gerarId(), texto: a, feita: !1 }), salvarTarefas(), renderTarefas(), taskInput.value = "") }), tarefas.length >= 5 && container.classList.add("margin"), renderTarefas();